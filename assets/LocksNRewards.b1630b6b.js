import{a as e,u as t,b as a}from"./index.4e540c11.js";import{d as o,r as n,u as l,C as s,o as i,e as c,f as u,t as r,x as d,F as m,h as k,B as p,D as v,b,S as g,w}from"./vendor.e1c4da11.js";const{userAddress:x,provider:L}=t(),{veContract:h,distContract:y}=a();var A=o({name:"LockCard",props:["tokenId"],async setup(t){var a,o;const i=t.tokenId,c=n(0),u=await(null==(a=null==h?void 0:h.value)?void 0:a.locked(i)),r=parseInt(l(u.amount)).toFixed(4),d=1e3*u.end.toNumber(),m=new Date(d).toLocaleString(),k=await(null==(o=null==y?void 0:y.value)?void 0:o.claimable(i));let p=new Array;for(let n=0;n<Object.keys(k).length;n++){const t=new s(k[n].token,JSON.stringify(e),L.value);let a;try{a=await(null==t?void 0:t.name())?await t.name():"NULL"}catch(v){a="NULL"}console.log("Name"),console.log(a);const o=await k[n].amount;p.push(new Map([["name",a.toString()],["amount",o.toNumber().toFixed()]]))}return{userAddress:x,isDeployer:!0,tokenId:i,amountLocked:r,endDate:m,increasingAmount:c,increaseAmount:async function(){var e;const t=(1e18*c.value).toFixed();await(null==(e=null==h?void 0:h.value)?void 0:e.increase_amount(i,t))},claimRewards:async function(){var e;await(null==(e=null==y?void 0:y.value)?void 0:e.claim(i))},claimables:p}}});const C={class:"card bg-white"},f={class:"card-content bg-white"},D={class:"media bg-white"},I={class:"media-content bg-white"},N={key:0,class:"title is-4 text-black"},T=u("p",{class:"subtitle is-7 text-black"},"Claimables:",-1),F={key:1,class:"subtitle is-7 text-black"},R={key:2,class:"subtitle is-7 text-black"},S=u("p",{class:"subtitle is-6 text-black"},"Deposit Amount:",-1);A.render=function(e,t,a,o,n,l){return i(),c("div",C,[u("div",f,[u("div",D,[u("div",I,[e.tokenId?(i(),c("p",N,"Lock #"+r(e.tokenId),1)):d("",!0),T,(i(!0),c(m,null,k(e.claimables,((e,t)=>(i(),c("p",{key:parseInt(t.toString()),class:"subtitle is-7 text-black"},r(e.get("name"))+" : "+r(e.get("amount")),1)))),128)),e.amountLocked?(i(),c("p",F,"Amount Locked: "+r(e.amountLocked),1)):d("",!0),e.endDate?(i(),c("p",R,"Lock End Time: "+r(e.endDate),1)):d("",!0),S,p(u("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.increasingAmount=t),class:"input is-link bg-white text-black",type:"text",placeholder:"Deposit amount"},null,512),[[v,e.increasingAmount]])])])]),u("button",{class:"button bg-white text-black",onClick:t[2]||(t[2]=(...t)=>e.increaseAmount&&e.increaseAmount(...t))},"Increase Amount"),u("button",{class:"button bg-white text-black",onClick:t[3]||(t[3]=(...t)=>e.claimRewards&&e.claimRewards(...t))},"Claim Rewards")])};const{veContract:U,numLocks:V,approveContract:j}=a(),{userAddress:_,signer:O}=t();var B=o({name:"LocksNRewards",setup(){const e=n(0),t=n(0),a=V.value;return console.log("num of locks: ",a),{locks:a,depositAmount:e,lockTime:t,createLock:async function(){var a;console.log("creating new lock...");const o=(1e18*e.value).toFixed();console.log(o),console.log(t.value),await(null==(a=null==U?void 0:U.value)?void 0:a.create_lock(o,t.value))},approve:async function(){var e,t;const a=await(null==(e=null==U?void 0:U.value)?void 0:e.token());console.log(a),await j(a,O.value,null==(t=null==U?void 0:U.value)?void 0:t.address)}}},components:{LockCard:A}});const E=u("div",{class:"title is-4 text-black",style:{"margin-bottom":"5px"}}," Create New Lock",-1),J={class:"center-div"},M={id:"container"},q={id:"left"},z=u("p",null,"Deposit Amount:",-1),G={id:"right"},H=u("p",null,"Lock Time (seconds):",-1),K={class:"grid grid-cols-1 lg:grid-cols-2 gap-x-8 gap-y-8 auto-rows-fr",style:{"margin-top":"20px"}};B.render=function(e,t,a,o,n,l){const s=b("LockCard");return i(),c(m,null,[E,u("button",{class:"button with-margins bg-white text-black",onClick:t[1]||(t[1]=(...t)=>e.approve&&e.approve(...t))},"Approve VeNFT Contract"),u("div",null,[u("div",J,[u("div",null,[u("div",M,[u("div",q,[z,p(u("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.depositAmount=t),class:"input is-link bg-white text-black",type:"text",placeholder:"Deposit amount"},null,512),[[v,e.depositAmount]])]),u("div",G,[H,p(u("input",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.lockTime=t),class:"input is-link bg-white text-black",type:"text",placeholder:"Lock Time"},null,512),[[v,e.lockTime]])])])]),u("button",{class:"button with-margins bg-white text-black",onClick:t[4]||(t[4]=(...t)=>e.createLock&&e.createLock(...t))},"Create New Lock"),u("div",K,[(i(),c(g,null,{default:w((()=>[(i(!0),c(m,null,k(e.locks,(e=>(i(),c(s,{key:e,tokenId:e},null,8,["tokenId"])))),128))])),_:1}))])])])],64)};export default B;
