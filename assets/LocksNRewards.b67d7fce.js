import{u as e,b as t}from"./index.e1d71dc3.js";import{d as a,r as o,u as n,o as l,e as s,f as i,t as c,x as u,F as d,h as r,B as k,D as m,b as p,S as v,w as b}from"./vendor.e1c4da11.js";const{userAddress:g}=e(),{veContract:w,distContract:x}=t();var L=a({name:"LockCard",props:["tokenId"],async setup(e){var t,a;const l=e.tokenId,s=o(0),i=await(null==(t=null==w?void 0:w.value)?void 0:t.locked(l)),c=parseInt(n(i.amount)).toFixed(4),u=1e3*i.end.toNumber(),d=new Date(u).toLocaleString(),r=await(null==(a=null==x?void 0:x.value)?void 0:a.claimable(l));return{userAddress:g,isDeployer:!0,tokenId:l,amountLocked:c,endDate:d,increasingAmount:s,increaseAmount:async function(){var e;const t=(1e18*s.value).toFixed();await(null==(e=null==w?void 0:w.value)?void 0:e.increase_amount(l,t))},claimRewards:async function(){var e;await(null==(e=null==x?void 0:x.value)?void 0:e.claim(l))},claimableInfo:r}}});const h={class:"card bg-white"},y={class:"card-content bg-white"},A={class:"media bg-white"},f={class:"media-content bg-white"},C={key:0,class:"title is-4 text-black"},I=i("p",{class:"subtitle is-7 text-black"},"Claimables:",-1),D={key:1,class:"subtitle is-7 text-black"},T={key:2,class:"subtitle is-7 text-black"},F=i("p",{class:"subtitle is-6 text-black"},"Deposit Amount:",-1);L.render=function(e,t,a,o,n,p){return l(),s("div",h,[i("div",y,[i("div",A,[i("div",f,[e.tokenId?(l(),s("p",C,"Lock #"+c(e.tokenId),1)):u("",!0),I,(l(!0),s(d,null,r(e.claimableInfo,((e,t)=>(l(),s("p",{key:parseInt(t.toString()),class:"subtitle is-7 text-black"},c(e.token)+" : "+c(e.amount),1)))),128)),e.amountLocked?(l(),s("p",D,"Amount Locked: "+c(e.amountLocked),1)):u("",!0),e.endDate?(l(),s("p",T,"Lock End Time: "+c(e.endDate),1)):u("",!0),F,k(i("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.increasingAmount=t),class:"input is-link bg-white text-black",type:"text",placeholder:"Deposit amount"},null,512),[[m,e.increasingAmount]])])])]),i("button",{class:"button bg-white text-black",onClick:t[2]||(t[2]=(...t)=>e.increaseAmount&&e.increaseAmount(...t))},"Increase Amount"),i("button",{class:"button bg-white text-black",onClick:t[3]||(t[3]=(...t)=>e.claimRewards&&e.claimRewards(...t))},"Claim Rewards")])};const{veContract:N,numLocks:R,approveContract:V}=t(),{userAddress:S,signer:U}=e();var _=a({name:"LocksNRewards",setup(){const e=o(0),t=o(0),a=R.value;return console.log("num of locks: ",a),{locks:a,depositAmount:e,lockTime:t,createLock:async function(){var a;console.log("creating new lock...");const o=(1e18*e.value).toFixed();console.log(o),console.log(t.value),await(null==(a=null==N?void 0:N.value)?void 0:a.create_lock(o,t.value))},approve:async function(){var e,t;const a=await(null==(e=null==N?void 0:N.value)?void 0:e.token());console.log(a),await V(a,U.value,null==(t=null==N?void 0:N.value)?void 0:t.address)}}},components:{LockCard:L}});const j=i("div",{class:"title is-4 text-black",style:{"margin-bottom":"5px"}}," Create New Lock",-1),B={class:"center-div"},E={id:"container"},q={id:"left"},z=i("p",null,"Deposit Amount:",-1),G={id:"right"},H=i("p",null,"Lock Time (seconds):",-1),J={class:"grid grid-cols-1 lg:grid-cols-2 gap-x-8 gap-y-8 auto-rows-fr",style:{"margin-top":"20px"}};_.render=function(e,t,a,o,n,c){const u=p("LockCard");return l(),s(d,null,[j,i("button",{class:"button with-margins bg-white text-black",onClick:t[1]||(t[1]=(...t)=>e.approve&&e.approve(...t))},"Approve VeNFT Contract"),i("div",null,[i("div",B,[i("div",null,[i("div",E,[i("div",q,[z,k(i("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.depositAmount=t),class:"input is-link bg-white text-black",type:"text",placeholder:"Deposit amount"},null,512),[[m,e.depositAmount]])]),i("div",G,[H,k(i("input",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.lockTime=t),class:"input is-link bg-white text-black",type:"text",placeholder:"Lock Time"},null,512),[[m,e.lockTime]])])])]),i("button",{class:"button with-margins bg-white text-black",onClick:t[4]||(t[4]=(...t)=>e.createLock&&e.createLock(...t))},"Create New Lock"),i("div",J,[(l(),s(v,null,{default:b((()=>[(l(!0),s(d,null,r(e.locks,(e=>(l(),s(u,{key:e,tokenId:e},null,8,["tokenId"])))),128))])),_:1}))])])])],64)};export default _;
